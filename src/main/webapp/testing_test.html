<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>考试页面</title>

        <!-- Custom fonts for this template-->
        <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
            rel="stylesheet">

        <!-- Custom styles for this template-->
        <link href="css/sb-admin-2.min.css" rel="stylesheet">
        <meta charset="utf-8">
        <title></title>
    </head>
    <body>
        <!-- Bootstrap core JavaScript-->
        <script src="vendor/jquery/jquery.min.js"></script>
        <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

        <!-- Core plugin JavaScript-->
        <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

        <!-- Custom scripts for all pages-->
        <script src="js/sb-admin-2.min.js"></script>

        <!-- Page level plugins -->
        <script src="vendor/chart.js/Chart.min.js"></script>

        <!-- Page level custom scripts -->
        <script src="js/demo/chart-area-demo.js"></script>
        <script src="js/demo/chart-pie-demo.js"></script>
        <div id="wrapper">
            <!-- container fluid -->
            <div class="container-fluid mt-3">
                <div class="row">
                    <!-- 试卷面板开始-->
                    <div class="col-md-9 col-sm-7">
                        <div id="single-choice">
                            <div class="card mb-3">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-1">
                                            <div class="row">
                                                <a class="font-weight-bold">1</a>
                                                <a class="font-weight-bold">单选</a>
                                            </div>
                                            <div class="row">
                                                <a class="text-info">5分</a>
                                            </div>
                                        </div>
                                        <div class="col-md-11">
                                            <div id="text" class="row">
                                                判断下列说法正确的是
                                            </div>
                                            <div id="pic" class="row">

                                            </div>
                                            <div id="option">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="exampleRadios"
                                                        id="exampleRadios1" value="option1" checked>
                                                    <label class="form-check-label" for="exampleRadios1">
                                                        A: 软件构造是一门文科课程
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="exampleRadios"
                                                        id="exampleRadios2" value="option2">
                                                    <label class="form-check-label" for="exampleRadios2">
                                                        B: 老师叫王忠秀
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="exampleRadios"
                                                        id="exampleRadios1" value="option1" checked>
                                                    <label class="form-check-label" for="exampleRadios1">
                                                        C: 软件构造主要语言是C#
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="exampleRadios"
                                                        id="exampleRadios1" value="option1" checked>
                                                    <label class="form-check-label" for="exampleRadios1">
                                                        D: 软件构造很难
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="multi-choice">
                            <div class="card  mb-3">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-1">
                                            <a class="font-weight-bold">2</a>
                                            <a class="font-weight-bold">多选</a>
                                        </div>
                                        <div class="col-md-11">
                                            <div id="text" class="row">
                                                判断下列说法正确的是
                                            </div>
                                            <div id="pic" class="row">

                                            </div>
                                            <div id="option">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                                                    <label class="form-check-label" for="defaultCheck1">
                                                        A: 软件构造是一门文科课程
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                                                    <label class="form-check-label" for="defaultCheck2">
                                                        B: 老师叫王忠秀
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                                                    <label class="form-check-label" for="defaultCheck3">
                                                        C: 软件构造主要语言是C#
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
                                                    <label class="form-check-label" for="defaultCheck4">
                                                        D: 软件构造很难
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="fill-blank">
                            <div class="card  mb-3">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-1">
                                            <a class="font-weight-bold">3</a>
                                            <a class="font-weight-bold">填空</a>
                                        </div>
                                        <div class="col-md-11">
                                            <div id="text" class="row">
                                                1+1=___, 2+2=___
                                            </div>
                                            <div id="pic" class="row">

                                            </div>
                                            <hr />
                                            <div id="option">
                                                <input type="text" class="form-control ">
                                                <input type="text" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="zhuguanti">
                                <div class="card  mb-3">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-1">
                                                <a class="font-weight-bold">4</a>
                                                <a class="font-weight-bold">主观</a>
                                            </div>
                                            <div class="col-md-11">
                                                <div id="text" class="row">
                                                    简述软件构造理论
                                                </div>
                                                <div id="pic" class="row">

                                                </div>
                                                <hr />
                                                <div id="fill" class="form-group">
                                                    <textarea class="form-control" rows="8"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <footer class="sticky-footer bg-white">
                                <div class="container my-auto">
                                    <div class="copyright text-center my-auto">
                                        <span>Copyright © NEUSOFT 2019</span>
                                    </div>
                                </div>
                            </footer>
                        </div>
                        <!-- 试卷面板结束-->
                        <!-- 进度和个人信息面板开始,悬浮面板-->
                        <div style="position:fixed;top:20px;right:5px" class="col-md-3 col-sm-5">
                            <!-- <div class="navbar navbar-inverse navbar-fixed-top">
                        <div class="navbar-inner">
                            <!--fluid 是偏移一部分
                            <div class="container-fluid">
                                <div class="card">
                                    <div class="card-header">
                                        
                                    </div>
                                    <div class="card-body">
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> -->
                            <div class="card shadow-sm mb-md-3">
                                <div class="card-header">
                                    <a class="h6 font-weight-bold text-gray-700">答题进度</a>
                                </div>
                                <div class="card-body">
                                    <!-- 进度条部分开始 -->
                                    <h4 class="small font-weight-bold">答题进度<span class="float-right">60%</span></h4>
                                    <div class="progress progress-sm mb-2">
                                        <div class="progress-bar" role="progressbar" style="width: 75%" aria-valuenow="60"
                                            aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <!-- 进度条部分结束 -->
                                    <hr />
                                    <!-- 选项块显示是否做完部分开始 -->
                                    <div id="block-progress">
                                        <div class="row align-middle">
                                            <div class="col-md-2 col-sm-4 mb-2">
                                                <!-- 此处超链接可以跳转题目 -->
                                                <a href="#" class="btn-sm btn-primary btn-circle">
                                                    1
                                                </a>
                                            </div>
                                            <div class="col-md-2 col-sm-4">
                                                <a href="#" class="btn-sm btn-primary btn-circle">
                                                    2
                                                </a>
                                            </div>
                                            <div class="col-md-2 col-sm-4">
                                                <a href="#" class="btn-sm btn-primary btn-circle">
                                                    3
                                                </a>
                                            </div>
                                            <div class="col-md-2 col-sm-4">
                                                <a href="#" class="btn-sm btn-primary btn-circle">
                                                    4
                                                </a>
                                            </div>
                                            <div class="col-md-2 col-sm-4">
                                                <a href="#" class="btn-sm btn-primary-outline btn-circle">
                                                    5
                                                </a>
                                            </div>
                                            <div class="col-md-2 col-sm-4">
                                                <a href="#" class="btn-sm btn-primary-outline btn-circle">
                                                    6
                                                </a>
                                            </div>
                                            <div class="col-md-2 col-sm-4">
                                                <a href="#" class="btn-sm btn-primary-outline btn-circle">
                                                    7
                                                </a>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- 选项块显示是否做完部分结束 -->
                            <!-- 倒计时部分开始 -->
                            <div class="card shadow-sm mb-3">
                                <div class="card-body">
                                    <span id="timer" class="text-lg text-danger"></span>
                                </div>
                            </div>
                            <!-- 倒计时部分结束 -->
                            <!-- 个人信息部分开始 -->
                            <div class="card shadow-sm mb-3">
                                <div class="card-header">
                                    <a class="h6 font-weight-bold text-gray-700">个人信息</a>
                                </div>
                                <div class="card-body">
                                    <p id="stu-name" class="h6  text-gray-700"></a>
                                        <p id="stu-id" class="h6  text-gray-700"></a>
                                            <p id="course-name" class="h6  text-gray-700"></a>
                                </div>
                            </div>
                            <!-- 个人信息部分结束 -->
                            <!-- 交卷部分开始 -->
                            <button class="btn btn-primary btn-block" onclick="handUp()">提交</button>
                            <!-- 交卷部分结束 -->
                        </div>
                        <!-- 进度和个人信息面板结束-->
                    </div>
                </div>
            </div>
            <script>
                var stuInfo;
                var examInfo;

                $(document).ready(function() {
                    loadUser();
                    loadPaper();
                });

                function loadUser() {
                    $.ajax({
                        type: "get",
                        url: "student/sessioninfo",
                        async: false,
                        success: function(data) {
                            stuInfo = data;
                        },
                        error: function(data) {

                        }
                    })
                    $.ajax({
                        type: "get",
                        url: "exam/sessioninfo",
                        async: false,
                        success: function(data) {
                            examInfo = data;
                        },
                        error: function(data) {

                        }
                    })
                    $("#stu-name").html("姓名: " + stuInfo.studentName);
                    $("#stu-id").html("学号: " + stuInfo.studentId);
                    $("#course-name").html("科目: " + getCourseName(examInfo.examCourse));

                    var startTime = Date.parse(new Date(examInfo.examDatetime));
                    var endTime = Date.parse(new Date(examInfo.examEndtime));
                    var intSecond = Math.floor((endTime - startTime) / 1000);
                    setTimer(intSecond)
                }

                function loadPaper() {
                    var questionList;
                    $.ajax({
                        type: "get",
                        url: "exam/questions",
                        async: false,
                        data: {
                            "paperId": examInfo.examPaperId
                        },
                        success: function(data) {
                            questionList = data;
                            alert(questionList[0].type)
                        },
                        error: function(data) {
                            alert("出现异常，请重试")
                        }
                    })
                    //建立模板
                    buildFormWork(questionList);
                    //填充模板
                    fillFormWork(questionList);
                }
                
                function buildFormWork(questionList) {
                    var singleFrame = 
                    <div id="single-choice">
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-1">
                                        <div class="row">
                                            <a class="font-weight-bold">1</a>
                                            <a class="font-weight-bold">单选</a>
                                        </div>
                                        <div class="row">
                                            <a class="text-info">5分</a>
                                        </div>
                                    </div>
                                    <div class="col-md-11">
                                        <div id="text" class="row">
                                            判断下列说法正确的是
                                        </div>
                                        <div id="pic" class="row">
                    
                                        </div>
                                        <div id="option">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="exampleRadios"
                                                    id="exampleRadios1" value="option1" checked>
                                                <label class="form-check-label" for="exampleRadios1">
                                                    A: 软件构造是一门文科课程
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="exampleRadios"
                                                    id="exampleRadios2" value="option2">
                                                <label class="form-check-label" for="exampleRadios2">
                                                    B: 老师叫王忠秀
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="exampleRadios"
                                                    id="exampleRadios1" value="option1" checked>
                                                <label class="form-check-label" for="exampleRadios1">
                                                    C: 软件构造主要语言是C#
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="exampleRadios"
                                                    id="exampleRadios1" value="option1" checked>
                                                <label class="form-check-label" for="exampleRadios1">
                                                    D: 软件构造很难
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><div id="single-choice">
                            <div class="card mb-3">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-1">
                                            <div class="row">
                                                <a class="font-weight-bold">1</a>
                                                <a class="font-weight-bold">单选</a>
                                            </div>
                                            <div class="row">
                                                <a class="text-info">5分</a>
                                            </div>
                                        </div>
                                        <div class="col-md-11">
                                            <div id="text" class="row">
                                                判断下列说法正确的是
                                            </div>
                                            <div id="pic" class="row">

                                            </div>
                                            <div id="option">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="exampleRadios"
                                                        id="exampleRadios1" value="option1" checked>
                                                    <label class="form-check-label" for="exampleRadios1">
                                                        A: 软件构造是一门文科课程
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="exampleRadios"
                                                        id="exampleRadios2" value="option2">
                                                    <label class="form-check-label" for="exampleRadios2">
                                                        B: 老师叫王忠秀
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="exampleRadios"
                                                        id="exampleRadios1" value="option1" checked>
                                                    <label class="form-check-label" for="exampleRadios1">
                                                        C: 软件构造主要语言是C#
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="exampleRadios"
                                                        id="exampleRadios1" value="option1" checked>
                                                    <label class="form-check-label" for="exampleRadios1">
                                                        D: 软件构造很难
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    var multiFrame = 
                    var judgeFrame = 
                    var fillFrame = 
                    var topicFrame = 
                }
                
                function fillFormWork(questionList) {
                    
                }

                function setTimer(intSecond) {
                    window.setInterval(function() {
                        var 
                            hour = 0,
                            minute = 0,
                            second = 0; //时间默认值        
                        if (intSecond > 0) {
                            hour = Math.floor(intSecond / (60 * 60));
                            minute = Math.floor(intSecond / 60) - (hour * 60);
                            second = Math.floor(intSecond) - (hour * 60 * 60) - (minute *
                                60);
                        } else {
                            //到点提交
                            handUp();
                        }
                        $('#timer').html(hour + ":" + minute + ":" + second);
                        intSecond--;
                    }, 1000);
                }

                function getCourseName(courseId) {
                    var name;
                    $.ajax({
                        type: "get",
                        async: false,
                        url: "course/getname",
                        data: {
                            "id": courseId,
                        },
                        success: function(data) {
                            name = data;
                        },
                        error: function(data) {
                            alert("出现异常，请重试")
                        }
                    })
                    return name;
                }
                
                function handUp() {
                    
                }
            </script>
    </body>
</html>
